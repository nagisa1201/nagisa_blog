---
title: SLAM部署与imu标定
categories: 
  - 技术
  - SLAM
tags: [技术博文,ROS1/2,SLAM]
date: 2025-03-19
---
<div align="center" style="font-size: 36px; font-weight: 800;">
  SLAM部署与imu标定
</div>

# 前言
- 笔者在[上一条帖子](https://tlf-nagisa-blog.com/2025/03/15/docker1/)时已经在尝试运行若干SLAM算法试图择优观察部署效果
(包括[FAST_LIO](https://github.com/hku-mars/FAST_LIO)，[LIO-SAM](https://github.com/TixiaoShan/LIO-SAM)，[Point-LIO](https://github.com/hku-mars/Point-LIO)，[rtabmap](https://github.com/introlab/rtabmap)等笔者看过的建图，定位算法）

- 笔者最终聚焦在[LIO-SAM](https://github.com/TixiaoShan/LIO-SAM)的建图(意即先导地图的获取)，随后利用[liorf_localization](https://github.com/YJZLuckyBoy/liorf_localization)的[LIO-SAM](https://github.com/TixiaoShan/LIO-SAM)衍生纯定位算法实现机器人在已知地图的重定位

- 可能有的开发者想问SLAM已经自带了同时建图与定位功能，为什么还要将建图和定位隔开进行开发。笔者在单跑LIO-SAM时发现过其轨迹与实际录取数据包时的误差，有时甚至会平地起飞（漂移）

- 为了解决这一问题，笔者尝试了隔离建图定位，进行imu内参标定的尝试，将其记录下来(~~其实就是臭掉包工程师~~)

# 基础知识扫盲
首先，我们要了解一下SLAM和传感器的有关术语

## SLAM，定位与建图
- 1.建图：简而言之，就是收集正在运作的传感器数据（本文中提到的均为激光SLAM，所以传感器基本上是激光雷达+imu），利用建图算法将这段时间的传感器数据记录为一张地图  

- 2.定位：实际上就是确定机器人从规定的地图原点（通常也是机器人的上电原点），到机器人任何一时刻运行时刻的位置改变，确定这个改变也就是给机器人定位了

- 或者，有了解过tf树的同学也可以通过几大坐标系更轻松的理解。map：地图原点；odom：机器人上电原点，里程计的初始点；base_link：机器人在运行过程中的任意一点，定位，就是时刻刷新odom到base_link的tf树变化

- 3.SLAM（同时建图与定位）：能够依靠高计算量算法，做到机器人首次在新环境中同时完成前两项的工作

- 需要注意的是，前面的三个概念，在实际运行的时候所需的数据资源一模一样，除了定位需要多用到一个建图结束生成的先导地图，三者均只需要提供雷达和imu数据即可。

## SLAM的分类
### 松、紧耦合传感器SLAM
- 1.紧，即传感器数据处理方式。将多个传感器的原始数据直接融合到同一个优化框架中，共同完成状态估计（如位姿、地图等）。
​所有传感器的原始数据在同一个数学模型中被联合优化

- 需注意，本帖中所提到的所有SLAM均为紧耦合SLAM，紧耦合最大的好处是充分发挥各传感器之间位姿带来的数据融合互补，配合算法纠偏

- 2.松，即多传感器分模块单独处理，各个传感器独立处理数据，生成局部估计结果（如相机的位姿、IMU的位姿），再通过后处理（如滤波或优化）进行融合

### 视觉与激光SLAM
- 1.激光SLAM即主要运用激光类传感器，如激光雷达。主要传感器数据为3D点云。目前被广泛运用，且有很多牛b的实验室算法

- 同样，本帖中所提到的所有SLAM均为激光SLAM，这也是大多数情况下使用的SLAM类型

- 2.视觉SLAM主要运用相机（如双目等）。主要传感器数据为2D图像。不如激光的发展迅速和好用，但在一些特定情况下能发挥其可以捕捉细节纹理的优势。

## ***跑定位前，你需要做什么***
### 传感器标定
#### 缘由
- 传感器的标定，直接影响了传感器在运行时数据的质量

- 传感器在运行时存在噪声，但是可以通过标定算法来平衡或者减小这一噪声带来的数据误差

#### 噪声标定分类
- 内参标定：标定传感器自身运行时的数据，自我校准，解决自身数据噪声。

- 外参标定：多传感器处于机器人不同的方位，外参标定就是因为人为测量计算两传感器之间的旋转矩阵存在误差，用外参标定包来进行二次校准，可以让两传感器之间的相对位置表示更加准确，方便后续的数据对齐（算法里的数据需要再同一坐标系下）

# 跑通SLAM的流程
- 

